import{f as M,u as C,r as H,g as V,o as c,c as l,a,F as L,i as z,j as i,k as T,v as b,m as B,l as g,n as I,t as q,q as _,s as N,p as k,e as j,_ as A}from"./entry.3ec37315.js";import{S as d}from"./SocketEvent.b1909740.js";const m=r=>(k("data-v-1a26a98b"),r=r(),j(),r),E={class:"content"},F={class:"chat__wrapper"},K={key:0,class:"message"},O={key:1,class:"image"},$=["src"],J={class:"send__wrapper"},P={class:"upload__wrapper"},R=m(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 384 512"},[a("path",{d:"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 408c0 13.3-10.7 24-24 24s-24-10.7-24-24V305.9l-31 31c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l72-72c9.4-9.4 24.6-9.4 33.9 0l72 72c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-31-31V408z"})],-1)),U=["onKeydown"],G=m(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[a("path",{d:"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"})],-1)),Q=[G],W=M({__name:"index",setup(r){C({title:"Chat"});const t=H({message:"",id:"",messages:new Array});V(()=>{localStorage.hasOwnProperty("Messages")&&y();const{$io:o}=g();o.connect(),o.on(d.new_count,e=>{t.id===""&&(t.id=e.id),e.message!==void 0&&t.messages.push({message:e.message,user:e.id}),e.image!==void 0&&t.messages.push({image:e.image,user:e.id})})});function h(o){const s=o.target.files[0],n=new FileReader;n.onload=f=>{const{$io:S}=g(),x=document.querySelector(".chat__wrapper");S.emit(d.up,{value:f.target.result,type:"image"}),setTimeout(()=>{var u;(u=document.querySelector(".chat__wrapper"))==null||u.scrollTo(0,x.scrollHeight+200)},250)},n.readAsDataURL(s)}function p(){if(t.message!==""){const{$io:o}=g(),e=document.querySelector(".chat__wrapper");o.emit(d.up,{value:t.message,type:"message"}),t.message="",setTimeout(()=>{var s;(s=document.querySelector(".chat__wrapper"))==null||s.scrollTo(0,e.scrollHeight+200)},250),w()}}const w=()=>localStorage.setItem("Messages",JSON.stringify(t.messages)),y=()=>t.messages=JSON.parse(localStorage.getItem("Messages")||"");function v(o){const e=o.target,s=e.parentElement,n=()=>{setTimeout(function(){e.style.height="auto",e.style.padding="10px",e.style.height=e.scrollHeight+"px",s.style.height=e.scrollHeight+"px"},0)};e.clientHeight<150||o.key==="Backspace"?n():setTimeout(function(){e.style.overflow="auto"},0)}return(o,e)=>(c(),l("div",E,[a("div",F,[(c(!0),l(L,null,z(i(t).messages,(s,n)=>(c(),l("div",{key:n,class:I([{yourMessage:s.user===i(t).id},"message__wrapper"])},[s.message?(c(),l("div",K,[a("span",null,q(s.message),1)])):_("",!0),s.image?(c(),l("div",O,[a("img",{src:s.image,alt:"Message"},null,8,$)])):_("",!0)],2))),128))]),a("div",J,[a("div",P,[a("input",{type:"file",accept:".jpg, .jpeg, .png",onChange:h},null,32),R]),T(a("textarea",{placeholder:"Message","onUpdate:modelValue":e[0]||(e[0]=s=>i(t).message=s),onKeydown:[B(N(p,["prevent"]),["enter"]),v],rows:"1"},null,40,U),[[b,i(t).message]]),a("button",{type:"button",onClick:p,class:"btn__send"},Q)])]))}});const Z=A(W,[["__scopeId","data-v-1a26a98b"]]);export{Z as default};
